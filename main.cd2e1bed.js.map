{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","header","querySelectorAll","data","newInput","createElement","oldValue","rowIndex","cellIndex","i","rows","length","push","name","cells","innerHTML","position","office","age","salary","replace","setAttribute","addEventListener","filterData","innerText","getAttribute","clickRow","e","indexOf","currentTarget","target","value","append","changeValue","blurInput","focus","removeClickRow","row","cell","window","event","key","blur","removeEventListener","createHTML","map","item","toLocaleString","activeRow","classList","remove","toggle","filterName","state","element","toLowerCase","sort","a","b","body","insertAdjacentHTML","form","saveBtn","addPerson","formData","FormData","get","validationForm","validationAlert","validationName","validationPosition","validationAge","validationSalary","className","text","setTimeout"],"mappings":"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","file":"main.cd2e1bed.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('tbody');\nconst header = document.querySelectorAll('th');\nconst data = [];\nconst newInput = document.createElement('input');\nlet oldValue = '';\nlet rowIndex = '';\nlet cellIndex = '';\n\nfor (let i = 0; i < table.rows.length; i++) {\n  data.push({\n    name: table.rows[i].cells[0].innerHTML,\n    position: table.rows[i].cells[1].innerHTML,\n    office: table.rows[i].cells[2].innerHTML,\n    age: table.rows[i].cells[3].innerHTML,\n    salary: +table.rows[i].cells[4].innerHTML.replace(/\\D/g, ''),\n  });\n}\n\nfor (let i = 0; i < header.length; i++) {\n  header[i].setAttribute('state', true);\n\n  header[i].addEventListener('click', () => {\n    filterData(\n      header[i].innerText,\n      header[i].getAttribute('state'),\n      header[i]\n    );\n  });\n}\n\nfunction clickRow(e) {\n  rowIndex = [...table.rows].indexOf(e.currentTarget);\n  cellIndex = [...e.currentTarget.cells].indexOf(e.target);\n\n  oldValue = e.target.innerHTML;\n  e.target.innerHTML = '';\n  newInput.value = oldValue;\n  e.target.append(newInput);\n\n  newInput.addEventListener('keyup', () => {\n    changeValue(e, rowIndex, cellIndex);\n  });\n\n  newInput.addEventListener('blur', () => {\n    blurInput(rowIndex, cellIndex);\n  });\n\n  newInput.focus();\n\n  removeClickRow();\n}\n\nfunction changeValue(e, row, cell) {\n  if (window.event.key === 'Enter') {\n    newInput.blur();\n  }\n\n  switch (cell) {\n    case 0:\n      data[row].name = newInput.value;\n      break;\n\n    case 1:\n      data[row].position = newInput.value;\n      break;\n\n    case 2:\n      data[row].office = newInput.value;\n      break;\n\n    case 3:\n      data[row].age = +newInput.value.replace(/\\D/g, '');\n      break;\n\n    case 4:\n      data[row].salary = +newInput.value.replace(/\\D/g, '');\n      break;\n  }\n}\n\nfunction blurInput(row, cell) {\n  newInput.removeEventListener('keyup', () => {\n    changeValue();\n  });\n\n  if (newInput.value === '') {\n    switch (cell) {\n      case 0:\n        data[row].name = oldValue;\n        break;\n      case 1:\n        data[row].position = oldValue;\n        break;\n      case 2:\n        data[row].office = oldValue;\n        break;\n      case 3:\n        data[row].age = oldValue;\n        break;\n      case 4:\n        data[row].salary = +newInput.value.replace(/\\D/g, '');\n        break;\n    }\n  }\n\n  createHTML();\n}\n\nfunction createHTML(e) {\n  table.innerHTML = '';\n\n  data.map((item) => {\n    const row = document.createElement('tr');\n\n    row.innerHTML = `\n      <td>${item.name}</td>\n      <td>${item.position}</td>\n      <td>${item.office}</td>\n      <td>${item.age}</td>\n      <td>$${item.salary.toLocaleString('en')}</td>\n    `;\n    table.append(row);\n    row.addEventListener('dblclick', clickRow);\n    row.addEventListener('click', activeRow);\n  });\n}\n\nfunction removeClickRow() {\n  for (let i = 0; i < table.rows.length; i++) {\n    table.rows[i].removeEventListener('dblclick', clickRow);\n  }\n}\n\nfunction activeRow(e) {\n  const rows = table.rows;\n\n  for (let i = 0; i < rows.length; i++) {\n    rows[i].classList.remove('active');\n  }\n  e.currentTarget.classList.toggle('active');\n}\n\ncreateHTML();\n\nfunction filterData(filterName, state, element) {\n  const key = filterName.toLowerCase();\n\n  data.sort((a, b) => {\n    return (\n      state === 'true' ? a[key] > b[key] ? 1 : -1 : a[key] < b[key] ? 1 : -1\n    );\n  });\n\n  element.setAttribute('state', state === 'true' ? 'false' : 'true');\n\n  createHTML();\n}\n\ndocument.body.insertAdjacentHTML('beforeend', `\n  <form class = \"new-employee-form\">\n  <label>Name:\n  <input required name=\"name\" type=\"text\" data-qa=\"name\">\n  </label>\n  <label>Position:\n  <input required name=\"position\" type=\"text\" data-qa=\"position\" >\n  </label>\n  <label>Office:\n  <select required name=\"office\" data-qa=\"office\">\n    <option value=\"Tokyo\">Tokyo</option>\n    <option value=\"Singapore\">Singapore</option>\n    <option value=\"London\">London</option>\n    <option value=\"New York\">New York</option>\n    <option value=\"Edinburgh\">Edinburgh</option>\n    <option value=\"San Francisco\">San Francisco</option>\n  </select>\n  </label>\n  <label>Age:\n  <input required name=\"age\" type=\"number\" data-qa=\"age\">\n  </label>\n  <label>Salary:\n  <input required name=\"salary\" type=\"number\" data-qa=\"salary\">\n  </label>\n  <button type=\"button\">Save to table</button>\n  </form>\n`);\n\nconst form = document.querySelector('form');\nconst saveBtn = document.querySelector('button');\n\nsaveBtn.addEventListener('click', validationForm);\n\nfunction addPerson() {\n  const formData = new FormData(form);\n\n  data.push({\n    name: formData.get('name'),\n    position: formData.get('position'),\n    office: formData.get('office'),\n    age: formData.get('age'),\n    salary: +formData.get('salary').replace(/\\D/g, ''),\n  });\n\n  createHTML();\n}\n\nfunction validationForm() {\n  const formData = new FormData(form);\n\n  if (\n    formData.get('name').length === 0\n    && formData.get('position').length === 0\n    && formData.get('age').length === 0\n    && formData.get('salary').length === 0\n  ) {\n    validationAlert(\n      'error',\n      'All fields are required'\n    );\n  } else {\n    validationName(formData);\n  }\n}\n\nfunction validationName(formData) {\n  if (formData.get('name').length < 4) {\n    validationAlert(\n      'error',\n      'Name must be more than 3 letters'\n    );\n  } else {\n    validationPosition(formData);\n  }\n}\n\nfunction validationPosition(formData) {\n  if (formData.get('position').length < 2) {\n    validationAlert(\n      'error',\n      'Indicate your position'\n    );\n  } else {\n    validationAge(formData);\n  }\n}\n\nfunction validationAge(formData) {\n  if (+formData.get('age') < 18\n    || +formData.get('age') > 90\n  ) {\n    validationAlert(\n      'error',\n      'Indicate age not less than 18 and not more than 90'\n    );\n  } else {\n    validationSalary(formData);\n  }\n}\n\nfunction validationSalary(formData) {\n  if (+formData.get('salary').length === 0) {\n    validationAlert(\n      'error',\n      'Please indicate salary'\n    );\n  } else {\n    addPerson();\n\n    validationAlert(\n      'success',\n      'Data added to table'\n    );\n  }\n}\n\nfunction validationAlert(className, text) {\n  document.body.insertAdjacentHTML('beforeend', `\n  <div class='notification ${className}'\n  data-qa=\"notification\">\n  <h1 class='title'>${text}</h1>\n  </div>\n`);\n\n  setTimeout(() => {\n    document.querySelector('.notification').remove();\n  }, 3000);\n}\n"]}